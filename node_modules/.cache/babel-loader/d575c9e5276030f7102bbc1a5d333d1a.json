{"ast":null,"code":"var _jsxFileName = \"/Users/aluan/Documents/GitHub/GeoPunk/src/CustomStyle.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport Sketch from 'react-p5';\nimport MersenneTwister from 'mersenne-twister';\nimport Mappa from \"mappa.js\";\nimport 'p5.easycam.js'; //-------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst key2 = 'AIzaSyB68yPc_unBU9fvPHyhfBqckW0EI38vqR4';\nconst mappa = new Mappa('Google', key2);\nlet jsonAddress, jsonData;\nlet img;\nlet rx = 160,\n    ry = 160,\n    slitCount = 0,\n    mapId = 2,\n    myMap;\nlet pg, displace, mosaic, source, mapDefult, jsonDefult;\nlet radlng, radlat, radPlace, inconsolata, sobel;\nlet rr = 0,\n    gg = 0,\n    bb = 0;\nlet t0 = {\n  'name': 'United States',\n  'lat': 38.933,\n  'lng': -109.699\n};\nlet t1 = {\n  'name': 'Taiwan',\n  'lat': 23.95,\n  'lng': 120.68\n};\nlet t2 = {\n  'name': 'Canada',\n  'lat': 52.61,\n  'lng': -72.074\n};\nlet t3 = {\n  'name': 'Australia',\n  'lat': -35.30,\n  'lng': 149.12\n};\nlet t4 = {\n  'name': 'Newtown',\n  'lat': -41.30,\n  'lng': 174.78\n};\nlet t5 = {\n  'name': 'United Kingdom',\n  'lat': 51.50,\n  'lng': -0.12\n};\nlet t6 = {\n  'name': 'China',\n  'lat': 39.91,\n  'lng': 116.39\n};\nlet t7 = {\n  'name': 'Russia',\n  'lat': 62.90,\n  'lng': 147.70\n};\nlet place = [t0, t1, t2, t3, t4, t5, t6, t7];\nlet land = [],\n    landImg = [];\nvar messages,\n    messages2,\n    messages3,\n    readid = 0;\nlet formatted_address,\n    checkJson = false;\nlet fontsize = 20,\n    fontPosY = 50;\nlet fontsize2 = 20,\n    fontPosY2 = 50;\nvar obj = [],\n    objs;\nlet checkDot = [2000];\nlet checkCount = 0,\n    runAngle = 0,\n    dis = 120,\n    radHash = 0; //-------------------------------------------\n\nvar frameCountPerCicle = 200;\nvar CFrameCount;\nvar CProgressR, CQuadEaseInR, CQuadEaseOutR, CQuartEaseInR, CQuartEaseOutR; //-------------------------------------------\n\nlet DEFAULT_SIZE = 500;\n\nconst CustomStyle = ({\n  block,\n  canvasRef,\n  attributesRef,\n  width,\n  height,\n  handleResize,\n  mod1 = 0.15,\n  // Example: replace any number in the code with mod1, mod2, or color values\n  mod2 = 0.25,\n  color1 = 'rgb(255,255,255)',\n  background = 'rgb(30,30,30)'\n}) => {\n  _s();\n\n  const shuffleBag = useRef();\n  const hoistedValue = useRef();\n  const {\n    hash\n  } = block; //-------------------------------------------\n\n  const preload = p5 => {\n    inconsolata = p5.loadFont('HindGuntur-Light.ttf');\n    displace = p5.loadShader('shader/displace.vert', 'shader/displace.frag');\n    mosaic = p5.loadShader('shader/mosaic.vert', 'shader/mosaic.frag');\n    sobel = p5.loadShader('shader/sobel.vert', 'shader/sobel.frag');\n    land[0] = p5.loadModel('model/cone3.obj');\n    land[1] = p5.loadModel('model/cube3.obj');\n    land[2] = p5.loadModel('model/cross3.obj');\n    land[3] = p5.loadModel('model/quad.obj');\n    landImg[0] = p5.loadImage(\"model/cone3.png\");\n    landImg[1] = p5.loadImage(\"model/cube3.png\");\n    landImg[2] = p5.loadImage(\"model/cross3.png\");\n    landImg[3] = p5.loadImage(\"model/quad4.png\");\n    mapDefult = p5.loadImage(\"model/map.png\");\n    jsonDefult = p5.loadJSON(\"data.json\"); //---------------------------\n\n    let seed = parseInt(hash.slice(0, 16), 16);\n    console.log(hash); // console.log(seed);\n\n    shuffleBag.current = new MersenneTwister(seed); // console.log(objs);\n\n    radPlace = parseInt(shuffleBag.current.random() * 6);\n    radlat = p5.nf(place[radPlace].lat + shuffleBag.current.random() * 0.08 - 0.04, 2, 3);\n    radlng = p5.nf(place[radPlace].lng + shuffleBag.current.random() * 0.08 - 0.04, 2, 3); // mapId   = 3;\n\n    mapId = parseInt(shuffleBag.current.random() * 4);\n    dis = parseInt(shuffleBag.current.random() * 240) + 60;\n    objs = block.transactions.map(t => {\n      let seed = parseInt(t.hash.slice(0, 16), 16);\n      let invert = shuffleBag.current.random(); // console.log(invert);\n\n      let dir = 1;\n      if (invert > 0.5) dir = 1;else dir = -1;\n      return {\n        name: t.hash,\n        z: (shuffleBag.current.random() * 2 + 1) * dir,\n        radius: seed / 500000000000000000\n      };\n    }); //---------------------------\n\n    const options = {\n      lat: radlat,\n      lng: radlng,\n      zoom: 16,\n      width: 640,\n      height: 640,\n      scale: 1,\n      format: 'PNG',\n      language: 'en',\n      maptype: 'satellite'\n    };\n    console.log(place[radPlace], options.lat, options.lng); //---------------------------\n\n    jsonAddress = \"https://maps.googleapis.com/maps/api/geocode/json?language=en&latlng=\" + options.lat + \",\" + options.lng + \"&key=\" + key2;\n    jsonData = p5.loadJSON(jsonAddress);\n    jsonDefult = p5.loadJSON(\"data.json\"); //---------------------------\n    // img = p5.loadImage(myMap.imgUrl);\n    // console.log(myMap.imgUrl);\n    //---------------------------\n\n    myMap = mappa.staticMap(options);\n\n    function responseImg() {\n      img = p5.loadImage(myMap.imgUrl);\n    }\n\n    function noresponseImg() {\n      img = mapDefult;\n    } //---------------------------\n\n\n    function getRequestImg(url) {\n      p5.httpDo(url, \"GET\", false, responseImg, noresponseImg);\n    }\n\n    getRequestImg(myMap.imgUrl); //---------------------------\n\n    source = p5.createGraphics(640, 640);\n    pg = p5.createGraphics(640, 640); //-------------------------------------------\n  }; //-------------------------------------------\n\n\n  const setup = (p5, canvasParentRef) => {\n    // Keep reference of canvas element for snapshots\n    p5.createCanvas(width, height, p5.WEBGL).parent(canvasParentRef);\n    p5.pixelDensity(2);\n    canvasRef.current = p5; //-------------------------------------------\n\n    p5.easycam = p5.createEasyCam({\n      distance: dis,\n      center: [0, 5, 0]\n    });\n    p5.easycam.setDistanceMin(60);\n    p5.easycam.setDistanceMax(300);\n    p5.noStroke();\n    p5.textureWrap(p5.CLAMP);\n    source.image(img, 0, 0);\n    p5.textSize(0.15);\n    p5.textAlign(p5.LEFT, p5.CENTER);\n    p5.textFont(inconsolata); //-------------------------------------------\n    //-------------------------------------------\n\n    attributesRef.current = () => {\n      return {\n        // This is called when the final image is generated, when creator opens the Mint NFT modal.\n        // should return an object structured following opensea/enjin metadata spec for attributes/properties\n        // https://docs.opensea.io/docs/metadata-standards\n        // https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1155.md#erc-1155-metadata-uri-json-schema\n        attributes: [{\n          display_type: 'number',\n          trait_type: 'your trait here number',\n          value: hoistedValue.current // using the hoisted value from within the draw() method, stored in the ref.\n\n        }, {\n          trait_type: 'your trait here text',\n          value: 'replace me'\n        }]\n      };\n    };\n  };\n\n  const draw = p5 => {\n    // let WIDTH = width;\n    // let HEIGHT = height;\n    // let DIM = Math.min(WIDTH, HEIGHT);\n    // let M = DIM / DEFAULT_SIZE;\n    updateCProgress(p5);\n    rr = p5.red(color1) / 510;\n    gg = p5.green(color1) / 510;\n    bb = p5.blue(color1) / 510; //-------------------------------------------mainShape\n\n    {\n      p5.background(background);\n      p5.noStroke();\n      p5.textSize(0.15);\n      p5.perspective(60 * p5.PI / 180, width / height, 0.1, 5000); // p5.normalMaterial();\n\n      let back = p5.abs(p5.millis() % 6000 / 6000 - 0.5) - 0.5;\n      p5.rotateZ(back);\n      p5.rotateX(back);\n      p5.rotateY(p5.millis() / 3000);\n      p5.shader(displace);\n      displace.setUniform(\"colormap\", pg);\n      displace.setUniform(\"mapId\", mapId);\n      displace.setUniform(\"mod1\", mod1);\n      displace.setUniform(\"mod2\", mod2);\n      displace.setUniform(\"color1\", [rr, gg, bb]); // console.log([rr,gg,bb]);\n\n      let checkInvert = p5.frameCount % 600; // console.log(p5.frameCount);\n\n      let checkNum;\n      if (checkInvert < 100) checkNum = Math.random(); // console.log(checkNum);\n\n      if (checkNum > 0.8) displace.setUniform(\"n\", 0);else displace.setUniform(\"n\", 1);\n      displace.setUniform(\"uFrameCount\", p5.frameCount);\n      p5.scale(12);\n      p5.stroke(255);\n      p5.strokeWeight(2);\n\n      for (let i = 0; i < 100; i++) {\n        let e = p5.lerp(3, -3, i / 100);\n        p5.point(0, e, 0);\n      }\n\n      p5.noStroke();\n      p5.fill(255);\n      p5.model(land[mapId]);\n      p5.resetShader();\n      p5.push();\n      p5.noFill();\n      p5.stroke(255, 10);\n\n      if (mapId == 0) {\n        p5.translate(0, 0.5, 0);\n        p5.scale(0.8, 0.2, 0.8);\n      }\n\n      if (mapId == 1) {\n        p5.translate(0, 0.1, 0);\n        p5.scale(0.9, 0.25, 0.9);\n      }\n\n      if (mapId == 2) {\n        p5.scale(1, 0.2, 1);\n      }\n\n      if (mapId == 3) {\n        p5.translate(0, 0.4, 0);\n        p5.scale(1, 0.2, 1);\n      }\n\n      p5.box(8);\n      p5.pop();\n      p5.noFill();\n\n      for (let i = 0; i < objs.length; i++) {\n        p5.push();\n        p5.translate(0, objs[i].z, 0);\n        p5.rotateX(3.14 / 2);\n\n        if (i == radHash) {\n          p5.stroke(255, 0, 0, 150);\n          p5.strokeWeight(2.0);\n        } else {\n          p5.stroke(200, 100);\n          p5.strokeWeight(0.5);\n        }\n\n        p5.ellipse(0, 0, objs[i].radius, objs[i].radius, 20);\n        p5.pop();\n      }\n    } //-------------------------------------------otherLine\n\n    {\n      p5.resetShader();\n      p5.push();\n      p5.fill(255);\n      p5.translate(0, 3, 0);\n      p5.sphere(0.05, 20, 20);\n      p5.translate(0, -6, 0);\n      p5.sphere(0.05, 20, 20);\n      p5.pop();\n      p5.push();\n      p5.fill(255);\n      p5.rotateY(p5.millis() / 2300);\n      p5.translate(2, -2, 0); // texture(img);\n\n      p5.shader(mosaic);\n      mosaic.setUniform(\"colormap\", img);\n      mosaic.setUniform(\"color1\", [rr, gg, bb]);\n      p5.stroke(255);\n      p5.strokeWeight(0.2);\n      p5.rect(0, 0, 1, 0.7);\n      p5.strokeWeight(2);\n\n      for (let i = 0; i < 20; i++) {\n        let e = p5.lerp(0.35, 1.6, i / 20);\n        p5.point(-0.6, e, 0);\n      }\n\n      for (let i = 0; i < 5; i++) {\n        let e = p5.lerp(-0.2, -0.6, i / 5);\n        p5.point(e, 0.35, 0);\n      }\n\n      p5.resetShader();\n      p5.noFill();\n      p5.stroke(255);\n      p5.strokeWeight(1);\n      p5.rect(0, 0, 1, 0.70);\n      p5.strokeWeight(4);\n      p5.point(-0.6, 1.6, 0);\n      p5.point(-0.2, 0.35, 0);\n      p5.pop();\n      p5.push();\n      p5.fill(255);\n      p5.rotateY(p5.millis() / 1100);\n      p5.translate(2.5, -2.5, 0);\n      p5.stroke(255);\n      p5.strokeWeight(0.2);\n      p5.strokeWeight(2);\n\n      for (let i = 0; i < 20; i++) {\n        let e = p5.lerp(0.35, 2.2, i / 20);\n        p5.point(-0.6, e, 0);\n      }\n\n      for (let i = 0; i < 5; i++) {\n        let e = p5.lerp(-0.3, -0.6, i / 5);\n        p5.point(e, 0.35, 0);\n      }\n\n      p5.strokeWeight(4);\n      p5.point(-0.6, 2.2, 0);\n      p5.point(-0.3, 0.35, 0);\n      p5.fill(255);\n      p5.text('LAT:' + radlat, 0, 0);\n      p5.text('LNG:' + radlng, 0, 0.2);\n      p5.pop();\n    } //-------------------------------------------drawHud\n\n    {\n      let cameraZoom = p5.easycam.getDistance();\n      let gridDist = p5.int(p5.map(cameraZoom, 60, 300, 15, 6)); // console.log(cameraZoom);\n\n      p5.easycam.beginHUD();\n      p5.shader(sobel);\n      sobel.setUniform(\"colormap\", img);\n      sobel.setUniform(\"resolution\", [640.0, 640.0]);\n      p5.image(img, 0, 0, width, height);\n      p5.resetShader();\n      p5.fill(100, 100); // text(place[radPlace].name,20,60);\n\n      p5.strokeWeight(1.0);\n\n      for (var i = 0; i < width; i += gridDist * 10) {\n        p5.stroke(100, 50);\n        p5.line(i, 0, i, height);\n        p5.line(width, i, 0, i);\n      }\n\n      checkCount = 0;\n\n      if (p5.frameCount % 60 === 0) {\n        for (let i = 0; i < width; i += gridDist * 10) {\n          for (let j = 0; j < height; j += gridDist * 10) {\n            let k = p5.random(10);\n            if (k > 5) checkDot[checkCount] = false;else checkDot[checkCount] = true;\n            if (checkDot[checkCount]) p5.point(i, j);\n            checkCount++;\n          }\n        }\n      }\n\n      checkCount = 0;\n      p5.strokeWeight(3.0);\n      p5.stroke(100, 100);\n\n      for (let i = 0; i < width; i += gridDist * 10) {\n        for (let j = 0; j < height; j += gridDist * 10) {\n          if (checkDot[checkCount]) p5.point(i, j);\n          checkCount++;\n        }\n      } //-----------------\n\n\n      if (messages2 != null) {\n        if (p5.frameCount % 20 === 0) {\n          fontPosY = p5.random(-100, 100) + height / 2;\n          fontsize = p5.random(20, 40);\n          readid = p5.int(p5.random(3));\n        }\n\n        if (p5.frameCount % 5 === 0) {\n          fontPosY2 = p5.random(-100, 100) + height / 2;\n          fontsize2 = p5.random(5, 15);\n        }\n\n        p5.fill(250, p5.random(20, 40));\n        p5.textSize(fontsize);\n        if (messages3 != null) p5.text(messages3[readid].long_name, 10, fontPosY);\n        p5.textSize(fontsize2);\n        p5.fill(250, 40);\n        if (formatted_address != null) p5.text(formatted_address, 10, fontPosY2); //-----------------\n\n        p5.textAlign(p5.CENTER, p5.CENTER);\n        p5.textSize(14);\n        p5.fill(250, 30);\n\n        if (checkJson) {\n          if (objs == null) p5.text(hash, width / 2, height - height * 0.05);else {\n            if (p5.frameCount % 30 == 0) radHash = p5.int(p5.random(objs.length));\n            p5.text(objs[radHash].name, width / 2, height - height * 0.05);\n          }\n        } else p5.text(\"OFFLINE\", width / 2, height - height * 0.05);\n      } // drawFrame(p5,width,height);\n\n\n      p5.easycam.endHUD();\n    } //-------------------------------------------slitscan\n\n    {\n      // pg.background(Math.random()*255);\n      if (slitCount < 640) {\n        rx = rx + parseInt(shuffleBag.current.random() * 10 - 5);\n        ry = ry + parseInt(shuffleBag.current.random() * 4 - 2);\n\n        if (slitCount === 0) {\n          pg.background(130);\n        }\n\n        pg.copy(img, rx, ry, 5, 320, slitCount, 0, 5, 640);\n        slitCount = slitCount + 5;\n\n        if (slitCount === 640) {\n          pg.image(landImg[mapId], 0, 0, 640, 640);\n\n          if (jsonData.error_message != null) {\n            console.log(\"json can't load\");\n            jsonData = jsonDefult;\n            checkJson = false; // console.log(jsonData);\n          } else {\n            console.log(\"loaded\");\n            checkJson = true; // console.log(jsonData);\n          }\n\n          messages = jsonData.results;\n\n          for (let i = 0; i < messages.length; i++) obj[i] = messages[i];\n\n          messages2 = obj[0];\n          messages3 = messages2.address_components;\n          formatted_address = messages2.formatted_address;\n        }\n      } // p5.image(img,0,-3,5,3);\n      // p5.image(pg,0,0,5,3);\n\n    } //-------------------------------------------textAnimation\n    //-------------------------------------------\n  };\n\n  return /*#__PURE__*/_jsxDEV(Sketch, {\n    preload: preload,\n    setup: setup,\n    draw: draw,\n    windowResized: handleResize\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 442,\n    columnNumber: 10\n  }, this);\n};\n\n_s(CustomStyle, \"eAcgvS7ZIhq58SkvxAYMJjr24hY=\");\n\n_c = CustomStyle;\nexport default CustomStyle;\nconst styleMetadata = {\n  name: '',\n  description: '',\n  image: '',\n  creator_name: '',\n  options: {\n    mod1: 0.0,\n    mod2: 0.0,\n    color1: 'rgb(70,70,70)',\n    background: 'rgb(30,30,30)'\n  }\n};\n\nfunction updateCProgress(p5) {\n  CFrameCount = p5.frameCount % frameCountPerCicle;\n  CProgressR = CFrameCount / frameCountPerCicle;\n  CQuadEaseInR = CProgressR * CProgressR;\n  CQuadEaseOutR = -p5.sq(CProgressR - 1) + 1;\n  CQuartEaseInR = p5.pow(CProgressR, 4);\n  CQuartEaseOutR = -p5.pow(CProgressR - 1, 4) + 1;\n}\n\nexport { styleMetadata };\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomStyle\");","map":{"version":3,"sources":["/Users/aluan/Documents/GitHub/GeoPunk/src/CustomStyle.js"],"names":["React","useRef","Sketch","MersenneTwister","Mappa","key2","mappa","jsonAddress","jsonData","img","rx","ry","slitCount","mapId","myMap","pg","displace","mosaic","source","mapDefult","jsonDefult","radlng","radlat","radPlace","inconsolata","sobel","rr","gg","bb","t0","t1","t2","t3","t4","t5","t6","t7","place","land","landImg","messages","messages2","messages3","readid","formatted_address","checkJson","fontsize","fontPosY","fontsize2","fontPosY2","obj","objs","checkDot","checkCount","runAngle","dis","radHash","frameCountPerCicle","CFrameCount","CProgressR","CQuadEaseInR","CQuadEaseOutR","CQuartEaseInR","CQuartEaseOutR","DEFAULT_SIZE","CustomStyle","block","canvasRef","attributesRef","width","height","handleResize","mod1","mod2","color1","background","shuffleBag","hoistedValue","hash","preload","p5","loadFont","loadShader","loadModel","loadImage","loadJSON","seed","parseInt","slice","console","log","current","random","nf","lat","lng","transactions","map","t","invert","dir","name","z","radius","options","zoom","scale","format","language","maptype","staticMap","responseImg","imgUrl","noresponseImg","getRequestImg","url","httpDo","createGraphics","setup","canvasParentRef","createCanvas","WEBGL","parent","pixelDensity","easycam","createEasyCam","distance","center","setDistanceMin","setDistanceMax","noStroke","textureWrap","CLAMP","image","textSize","textAlign","LEFT","CENTER","textFont","attributes","display_type","trait_type","value","draw","updateCProgress","red","green","blue","perspective","PI","back","abs","millis","rotateZ","rotateX","rotateY","shader","setUniform","checkInvert","frameCount","checkNum","Math","stroke","strokeWeight","i","e","lerp","point","fill","model","resetShader","push","noFill","translate","box","pop","length","ellipse","sphere","rect","text","cameraZoom","getDistance","gridDist","int","beginHUD","line","j","k","long_name","endHUD","copy","error_message","results","address_components","styleMetadata","description","creator_name","sq","pow"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport Sketch from 'react-p5';\nimport MersenneTwister from 'mersenne-twister';\nimport Mappa from \"mappa.js\";\nimport 'p5.easycam.js';\n//-------------------------------------------\nconst key2 = 'AIzaSyB68yPc_unBU9fvPHyhfBqckW0EI38vqR4';\nconst mappa = new Mappa('Google', key2);\nlet jsonAddress,jsonData;\nlet img;\nlet rx = 160,ry = 160,slitCount = 0,mapId=2,myMap ;\nlet pg,displace,mosaic,source,mapDefult,jsonDefult;\nlet radlng,radlat,radPlace,inconsolata,sobel;\nlet rr=0,gg=0,bb=0;\nlet t0={'name':'United States','lat':38.933,'lng':-109.699};\nlet t1={'name':'Taiwan','lat':23.95,'lng':120.68};\nlet t2={'name':'Canada','lat':52.61,'lng':-72.074};\nlet t3={'name':'Australia','lat':-35.30,'lng':149.12};\nlet t4={'name':'Newtown','lat':-41.30,'lng':174.78};\nlet t5={'name':'United Kingdom','lat':51.50,'lng':-0.12};\nlet t6={'name':'China','lat':39.91,'lng':116.39};\nlet t7={'name':'Russia','lat':62.90,'lng':147.70};\nlet place=[t0,t1,t2,t3,t4,t5,t6,t7];\nlet land=[],landImg=[];\nvar messages, messages2,messages3,readid=0;\nlet formatted_address,checkJson=false;\nlet fontsize=20,fontPosY=50;\nlet fontsize2=20,fontPosY2=50;\nvar obj=[],objs;\nlet checkDot=[2000];\nlet checkCount=0,runAngle=0,dis=120,radHash=0;\n//-------------------------------------------\nvar frameCountPerCicle = 200;\nvar CFrameCount;\nvar CProgressR,CQuadEaseInR,CQuadEaseOutR,CQuartEaseInR,CQuartEaseOutR;\n//-------------------------------------------\nlet DEFAULT_SIZE = 500;\nconst CustomStyle = ({\n  block,\n  canvasRef,\n  attributesRef,\n  width,\n  height,\n  handleResize,\n  mod1 = 0.15, // Example: replace any number in the code with mod1, mod2, or color values\n  mod2 = 0.25,\n  color1 = 'rgb(255,255,255)',\n  background = 'rgb(30,30,30)',\n}) => {\n  const shuffleBag = useRef();\n  const hoistedValue = useRef();\n  const { hash } = block;\n  //-------------------------------------------\n  const preload = (p5) => {\n    inconsolata = p5.loadFont('HindGuntur-Light.ttf');\n    displace = p5.loadShader('shader/displace.vert', 'shader/displace.frag');\n    mosaic = p5.loadShader('shader/mosaic.vert', 'shader/mosaic.frag');\n    sobel=p5.loadShader('shader/sobel.vert', 'shader/sobel.frag');\n    land[0]=p5.loadModel('model/cone3.obj');\n    land[1]=p5.loadModel('model/cube3.obj');\n    land[2]=p5.loadModel('model/cross3.obj');\n    land[3]=p5.loadModel('model/quad.obj');\n    landImg[0]=p5.loadImage(\"model/cone3.png\");\n    landImg[1]=p5.loadImage(\"model/cube3.png\");\n    landImg[2]=p5.loadImage(\"model/cross3.png\");\n    landImg[3]=p5.loadImage(\"model/quad4.png\");\n    mapDefult=p5.loadImage(\"model/map.png\");\n    jsonDefult=p5.loadJSON(\"data.json\");\n    //---------------------------\n    let seed = parseInt(hash.slice(0, 16), 16);\n    console.log(hash);\n    // console.log(seed);\n    shuffleBag.current = new MersenneTwister(seed);\n    // console.log(objs);\n    radPlace=parseInt(shuffleBag.current.random()*6);\n    radlat  =p5.nf(place[radPlace].lat + shuffleBag.current.random()*0.08-0.04,2,3);\n    radlng  =p5.nf(place[radPlace].lng + shuffleBag.current.random()*0.08-0.04,2,3);\n    // mapId   = 3;\n    mapId   = parseInt(shuffleBag.current.random()*4);\n    dis = parseInt(shuffleBag.current.random()*240)+60;\n\n    objs = block.transactions.map((t) => {\n      let seed = parseInt(t.hash.slice(0, 16), 16);\n      let invert=shuffleBag.current.random();\n      // console.log(invert);\n      let dir=1;\n      if(invert>0.5)dir=1;\n      else dir=-1;\n      return {\n        name:t.hash,\n        z: (shuffleBag.current.random()*2+1)*dir,\n        radius: seed / 500000000000000000,\n      };\n    });\n    //---------------------------\n    const options = {\n      lat: radlat,\n      lng: radlng,\n      zoom: 16,\n      width: 640,\n      height: 640,\n      scale: 1,\n      format: 'PNG',\n      language: 'en',\n      maptype: 'satellite',\n    };\n    console.log(place[radPlace],options.lat,options.lng);\n    //---------------------------\n    jsonAddress=\"https://maps.googleapis.com/maps/api/geocode/json?language=en&latlng=\"+options.lat+\",\"+options.lng+\"&key=\"+key2;\n    jsonData=p5.loadJSON(jsonAddress);\n    jsonDefult=p5.loadJSON(\"data.json\")\n    //---------------------------\n    // img = p5.loadImage(myMap.imgUrl);\n    // console.log(myMap.imgUrl);\n    //---------------------------\n    myMap = mappa.staticMap(options);\n    function responseImg(){img = p5.loadImage(myMap.imgUrl);}\n    function noresponseImg(){img = mapDefult;}\n    //---------------------------\n    function getRequestImg(url)  { p5.httpDo(url, \"GET\", false, responseImg,  noresponseImg);}\n    getRequestImg(myMap.imgUrl);\n    //---------------------------\n    source = p5.createGraphics(640, 640);\n    pg = p5.createGraphics(640, 640);\n    //-------------------------------------------\n  }\n  //-------------------------------------------\n  const setup = (p5, canvasParentRef) => {\n    // Keep reference of canvas element for snapshots\n    p5.createCanvas(width, height,p5.WEBGL).parent(canvasParentRef);\n    p5.pixelDensity(2);\n    canvasRef.current = p5;\n    //-------------------------------------------\n    p5.easycam = p5.createEasyCam({distance:dis,center: [0,5,0] });\n    p5.easycam.setDistanceMin(60);\n    p5.easycam.setDistanceMax(300);\n    p5.noStroke();\n    p5.textureWrap(p5.CLAMP);\n    source.image(img, 0, 0);\n    p5.textSize(0.15);\n    p5.textAlign(p5.LEFT, p5.CENTER);\n    p5.textFont(inconsolata);\n    //-------------------------------------------\n\n    //-------------------------------------------\n    attributesRef.current = () => {\n      return {\n        // This is called when the final image is generated, when creator opens the Mint NFT modal.\n        // should return an object structured following opensea/enjin metadata spec for attributes/properties\n        // https://docs.opensea.io/docs/metadata-standards\n        // https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1155.md#erc-1155-metadata-uri-json-schema\n\n        attributes: [\n          {\n            display_type: 'number',\n            trait_type: 'your trait here number',\n            value: hoistedValue.current, // using the hoisted value from within the draw() method, stored in the ref.\n          },\n\n          {\n            trait_type: 'your trait here text',\n            value: 'replace me',\n          },\n        ],\n      };\n    };\n  };\n\n  const draw = (p5) => {\n    // let WIDTH = width;\n    // let HEIGHT = height;\n    // let DIM = Math.min(WIDTH, HEIGHT);\n    // let M = DIM / DEFAULT_SIZE;\n    updateCProgress(p5);\n    rr=p5.red(color1)/510;\n    gg=p5.green(color1)/510;\n    bb=p5.blue(color1)/510;\n    //-------------------------------------------mainShape\n    {\n      p5.background(background);\n      p5.noStroke();\n      p5.textSize(0.15);\n      p5.perspective(60 * p5.PI/180, width/height, 0.1, 5000);\n      // p5.normalMaterial();\n      let back=p5.abs(((p5.millis()%6000) / 6000)-0.5)-0.5;\n      p5.rotateZ(back);\n      p5.rotateX(back);\n      p5.rotateY(p5.millis() / 3000);\n      p5.shader(displace);\n      displace.setUniform(\"colormap\", pg);\n      displace.setUniform(\"mapId\", mapId);\n      displace.setUniform(\"mod1\", mod1);\n      displace.setUniform(\"mod2\", mod2);\n      displace.setUniform(\"color1\", [rr,gg,bb]);\n      // console.log([rr,gg,bb]);\n      let checkInvert=(p5.frameCount%600);\n      // console.log(p5.frameCount);\n      let checkNum;\n      if(checkInvert<100)checkNum=Math.random();\n      // console.log(checkNum);\n      if(checkNum>0.8)displace.setUniform(\"n\", 0);\n      else displace.setUniform(\"n\", 1);\n\n      displace.setUniform(\"uFrameCount\", p5.frameCount);\n      p5.scale(12);\n      p5.stroke(255);\n      p5.strokeWeight(2);\n      for(let i=0;i<100;i++){\n        let e = p5.lerp(3, -3, i/100);\n        p5.point(0,e,0);\n      }\n      p5.noStroke();\n      p5.fill(255);\n      p5.model(land[mapId]);\n      p5.resetShader();\n\n      p5.push();\n      p5.noFill();\n      p5.stroke(255,10);\n      if(mapId==0){\n        p5.translate(0,0.5,0);\n        p5.scale(0.8,0.2,0.8);\n      }\n      if(mapId==1){\n        p5.translate(0,0.1,0);\n        p5.scale(0.9,0.25,0.9);\n      }\n      if(mapId==2){\n        p5.scale(1,0.2,1);\n      }\n      if(mapId==3){\n        p5.translate(0,0.4,0);\n        p5.scale(1,0.2,1);\n      }\n      p5.box(8);\n      p5.pop();\n\n      p5.noFill();\n\n      for(let i=0;i<objs.length;i++){\n        p5.push();\n        p5.translate(0,objs[i].z,0);\n        p5.rotateX(3.14/2);\n        if(i==radHash){\n          p5.stroke(255,0,0,150);\n          p5.strokeWeight(2.0);\n        }else{\n          p5.stroke(200,100);\n          p5.strokeWeight(0.5);\n        }\n        p5.ellipse(0,0,objs[i].radius,objs[i].radius,20);\n        p5.pop();\n      }\n\n    }\n    //-------------------------------------------otherLine\n    {\n    p5.resetShader();\n    p5.push();\n    p5.fill(255);\n    p5.translate(0,3,0);\n    p5.sphere(0.05,20,20);\n    p5.translate(0,-6,0);\n    p5.sphere(0.05,20,20);\n    p5.pop();\n\n\n    p5.push();\n    p5.fill(255);\n    p5.rotateY(p5.millis() / 2300);\n    p5.translate(2,-2,0);\n    // texture(img);\n    p5.shader(mosaic);\n    mosaic.setUniform(\"colormap\", img);\n    mosaic.setUniform(\"color1\", [rr,gg,bb]);\n    p5.stroke(255);\n    p5.strokeWeight(0.2);\n    p5.rect(0,0,1,0.7);\n    p5.strokeWeight(2);\n    for(let i=0;i<20;i++){\n      let e = p5.lerp(0.35, 1.6, i/20);\n      p5.point(-0.6,e,0);\n    }\n    for(let i=0;i<5;i++){\n      let e = p5.lerp(-0.2, -0.6, i/5);\n      p5.point(e,0.35,0);\n    }\n\n    p5.resetShader();\n    p5.noFill();\n    p5.stroke(255);\n    p5.strokeWeight(1);\n    p5.rect(0,0,1,0.70);\n    p5.strokeWeight(4);\n    p5.point(-0.6,1.6,0);\n    p5.point(-0.2,0.35,0);\n    p5.pop();\n\n    p5.push();\n    p5.fill(255);\n    p5.rotateY(p5.millis() / 1100);\n    p5.translate(2.5,-2.5,0);\n    p5.stroke(255);\n    p5.strokeWeight(0.2);\n    p5.strokeWeight(2);\n    for(let i=0;i<20;i++){\n      let e = p5.lerp(0.35, 2.2, i/20);\n      p5.point(-0.6,e,0);\n    }\n    for(let i=0;i<5;i++){\n      let e = p5.lerp(-0.3, -0.6, i/5);\n      p5.point(e,0.35,0);\n    }\n    p5.strokeWeight(4);\n    p5.point(-0.6,2.2,0);\n    p5.point(-0.3,0.35,0);\n    p5.fill(255);\n    p5.text('LAT:'+radlat, 0, 0);\n    p5.text('LNG:'+radlng, 0, 0.2);\n    p5.pop();\n    }\n    //-------------------------------------------drawHud\n    {\n      let cameraZoom=p5.easycam.getDistance();\n      let gridDist=p5.int(p5.map(cameraZoom,60,300,15,6));\n      // console.log(cameraZoom);\n      p5.easycam.beginHUD();\n      p5.shader(sobel);\n      sobel.setUniform(\"colormap\", img);\n      sobel.setUniform(\"resolution\", [640.0,640.0]);\n\n      p5.image(img,0,0,width,height);\n      p5.resetShader();\n\n      p5.fill(100,100)\n      // text(place[radPlace].name,20,60);\n      p5.strokeWeight(1.0);\n      for (var i = 0; i < width; i += gridDist*10) {\n        p5.stroke(100,50);\n        p5.line(i, 0, i, height);\n        p5.line(width, i, 0, i);\n      }\n      checkCount=0;\n      if(p5.frameCount%60===0){\n        for (let i = 0; i < width; i += gridDist*10) {\n          for (let j = 0; j < height; j += gridDist*10) {\n            let k=p5.random(10);\n            if(k>5)checkDot[checkCount]=false;\n            else checkDot[checkCount]=true;\n            if(checkDot[checkCount])p5.point(i,j);\n            checkCount++;\n          }\n        }\n      }\n      checkCount=0;\n      p5.strokeWeight(3.0);\n      p5.stroke(100,100)\n      for (let i = 0; i < width; i += gridDist*10) {\n        for (let j = 0; j < height; j += gridDist*10) {\n          if(checkDot[checkCount])p5.point(i,j);\n          checkCount++;\n        }\n      }\n      //-----------------\n      if (messages2!= null) {\n        if (p5.frameCount%20===0) {\n          fontPosY=p5.random(-100,100)+height/2;\n          fontsize=p5.random(20, 40);\n          readid=p5.int(p5.random(3));\n        }\n\n        if (p5.frameCount%5===0) {\n          fontPosY2=p5.random(-100,100)+height/2;\n          fontsize2=p5.random(5, 15);\n        }\n        p5.fill(250,p5.random(20,40));\n        p5.textSize(fontsize);\n        if (messages3!=null)p5.text(messages3[readid].long_name, 10, fontPosY);\n\n        p5.textSize(fontsize2);\n        p5.fill(250,40);\n        if (formatted_address!=null)p5.text(formatted_address, 10, fontPosY2);\n        //-----------------\n        p5.textAlign(p5.CENTER,p5.CENTER);\n        p5.textSize(14);\n        p5.fill(250,30);\n      if(checkJson){\n\n        if(objs==null)p5.text(hash, width/2,height-height*0.05);\n        else {\n        if(p5.frameCount%30==0)radHash=p5.int(p5.random(objs.length));\n        p5.text(objs[radHash].name, width/2,height-height*0.05);\n        }\n      }\n      else p5.text(\"OFFLINE\", width/2,height-height*0.05);\n      }\n      // drawFrame(p5,width,height);\n      p5.easycam.endHUD();\n    }\n    //-------------------------------------------slitscan\n    {\n\n      // pg.background(Math.random()*255);\n      if (slitCount < 640) {\n        rx = rx + parseInt(shuffleBag.current.random()*10-5);\n        ry = ry + parseInt(shuffleBag.current.random()*4-2);\n        if (slitCount === 0) {\n          pg.background(130);\n        }\n        pg.copy(img, rx, ry, 5, 320, slitCount, 0, 5, 640);\n        slitCount = slitCount + 5;\n        if (slitCount === 640) {\n          pg.image(landImg[mapId], 0, 0, 640, 640);\n\n          if(jsonData.error_message!=null){\n            console.log(\"json can't load\");\n            jsonData=jsonDefult;\n            checkJson=false;\n            // console.log(jsonData);\n          }else{\n            console.log(\"loaded\");\n            checkJson=true;\n            // console.log(jsonData);\n          }\n\n          messages = jsonData.results;\n          for (let i=0; i<messages.length; i++) obj[i]=messages[i];\n          messages2 = obj[0];\n          messages3=messages2.address_components;\n          formatted_address=messages2.formatted_address;\n        }\n      }\n\n    // p5.image(img,0,-3,5,3);\n    // p5.image(pg,0,0,5,3);\n    }\n    //-------------------------------------------textAnimation\n\n    //-------------------------------------------\n  };\n\n  return <Sketch preload={preload} setup={setup} draw={draw} windowResized={handleResize} />;\n};\nexport default CustomStyle;\nconst styleMetadata = {\n  name: '',\n  description: '',\n  image: '',\n  creator_name: '',\n  options: {\n    mod1: 0.0,\n    mod2: 0.0,\n    color1: 'rgb(70,70,70)',\n    background: 'rgb(30,30,30)',\n  },\n};\nfunction updateCProgress(p5) {\n  CFrameCount = p5.frameCount % frameCountPerCicle;\n  CProgressR = CFrameCount / frameCountPerCicle;\n  CQuadEaseInR = CProgressR * CProgressR;\n  CQuadEaseOutR = -p5.sq(CProgressR - 1) + 1;\n  CQuartEaseInR = p5.pow(CProgressR, 4);\n  CQuartEaseOutR = -p5.pow(CProgressR - 1, 4) + 1;\n}\nexport { styleMetadata };\n"]},"metadata":{},"sourceType":"module"}