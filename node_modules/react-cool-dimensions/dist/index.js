"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function r(){return(r=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}var n="ðŸ’¡ react-cool-dimensions: the browser doesn't support Resize Observer, please use polyfill: https://github.com/wellyshen/react-cool-dimensions#resizeobserver-polyfill",t="ðŸ’¡ react-cool-dimensions: the browser doesn't support border-box size, fallback to content-box size. Please see: https://github.com/wellyshen/react-cool-dimensions#border-box-size-measurement";exports.borderBoxWarn=t,exports.default=function(o){var u=void 0===o?{}:o,i=u.ref,c=u.useBorderBoxSize,s=u.breakpoints,a=u.updateOnBreakpointChange,l=u.shouldUpdate,f=u.onResize,p=u.polyfill,h=e.useState({currentBreakpoint:"",width:0,height:0}),b=h[0],d=h[1],v=e.useRef({}),w=e.useRef(),k=e.useRef(null),y=e.useRef(null),B=e.useRef(null),z=e.useRef(!1),R=e.useRef(null),g=e.useRef(null==R?void 0:R.current);g=i||g,e.useEffect((function(){f&&(y.current=f)}),[f]),e.useEffect((function(){l&&(B.current=l)}),[l]);var x=e.useCallback((function(e){e&&(g.current=e),k.current&&g.current&&k.current.observe(g.current)}),[g]),O=e.useCallback((function(){k.current&&k.current.disconnect()}),[]);return e.useEffect((function(){return g.current?"ResizeObserver"in window&&"ResizeObserverEntry"in window||p?(k.current=new(p||window.ResizeObserver)((function(e){var r=e[0],n=r.contentBoxSize,o=r.borderBoxSize,u=r.contentRect,i=n;c&&(o?i=o:z.current||(console.warn(t),z.current=!0));var l=(i=Array.isArray(i)?i[0]:i)?i.inlineSize:u.width,f=i?i.blockSize:u.height;if(l!==v.current.width||f!==v.current.height){v.current={width:l,height:f};var p,h,b,k,R={currentBreakpoint:"",width:l,height:f,entry:r,observe:x,unobserve:O};s?(R.currentBreakpoint=(p=s,h=l,b="",k=-1,Object.keys(p).forEach((function(e){var r=p[e];h>=r&&r>k&&(b=e,k=r)})),b),R.currentBreakpoint!==w.current&&(y.current&&y.current(R),w.current=R.currentBreakpoint)):y.current&&y.current(R);var g={currentBreakpoint:R.currentBreakpoint,width:l,height:f,entry:r};B.current&&!B.current(g)||(!B.current&&s&&a?d((function(e){return e.currentBreakpoint!==g.currentBreakpoint?g:e})):d(g))}})),x(),function(){return O()}):(console.error(n),function(){return null}):function(){return null}}),[JSON.stringify(s),c,x,O,a]),r({ref:g},b,{observe:x,unobserve:O})},exports.observerErr=n;
